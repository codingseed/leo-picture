# 什么是网络编程?

**就是计算机跟计算机之间通过网络进行数据传输**

在网络通信协议下，不同计算机上运行的程序，进行的数据传输

应用场景:即时通信、网游对战、金融证券、国际贸易、邮件、等等不管是什么场景，都是计算机跟计算机之间通过网络进行数据传输

Java中可以使用java.net包下的技术轻松开发出常见的网络应用程序。



## 常见的软件架构

**C/S: Client/Server客户端/服务器**

在用户本地需要下载并安装客户端程序在远程有一个服务器端程序。

### **CS架构的优缺点**

画面可以做的非常精美，用户体验好
需要开发客户端，也需要开发服务端
用户需要下载和更新的时候太麻烦



**B/S: Browser/Server浏览器/服务器**

只需要一个浏览器，用户通过不同的网址，客户访问不同的服务器

### **BS架构的优缺点**

不需要开发客户端，只需要页面+服务端
用户不需要下载，打开浏览器就能使用
如果应用过大，用户体验受到影响



CS:适合定制专业化的办公类软件如:IDEA、网游

BS:适合移动互联网应用，可以在任何地方随时访问的系统



# 网络编程三要素

## IP、端口号、协议

### **IP**

**设备在网络中的地址，是唯一的标识**

全称:Internet Protocol，是互联网协议地址，也称IP地址是分配给上网设备的数字标签，
通俗理解
上网设备在网络中的地址，是唯一的
常见的IP分类为
IPv4、IPV6

**特殊IP地址**
127.0.0.1，也可以是localhost:是回送地址也称本地回环地址，也称本机IP，永远只会寻找当前所在本机。

假设192.168.1.100 是我电脑的IP，那么这个IP跟127.0.0.1是一样的吗?

不同，在不同地区上网时192.168.1.100 先往路由器发送数据，路由器会找到当前IP，不同地区的路由器局域网IP可能不同，使用127.0.0.1发送数据时经过网卡时会直接将数据发给自己不经过路由器。

**常用的CMD命令**

ipconfig:查看本机IP地址

ping:检查网络是否连通

**InetAddress**
代表IP地址。

**IPv4**

全称:InternetProtocolversion4，互联网通信协议第四版,采用32位地址长度，分成4组

<img src="D:\在图片\java网络编程\01.png" style="zoom: 33%;" />



<img src="D:\在图片\java网络编程\02.png" style="zoom: 33%;" />

**特点：**

目前的主流方案
最多只有2^32次方个ip，目前已经用完了

**IPv6**

全称:Internet Protocolversion6，互联网通信协议第六版。
由于互联网的蓬勃发展，IP地址的需求量愈来愈大，而IPv4的模式下IP的总数是有限的。
采用128位地址长度，分成8组。

<img src="D:\在图片\java网络编程\03.png" style="zoom: 25%;" />

**特点：**

为了解决IPv4不够用而出现的

最多有2^128次方个ip

可以为地球上的每一粒沙子都设定ip

### **端口号**

**应用程序**在设备中唯一的标识。

### **协议**

数据在网络中传输的规则
	常见的协议有UDP、TCP、http、https、ftp、Websocket(基于TCP)

<img src="D:\在图片\java网络编程\0.png" style="zoom:150%;" />

- 1.应用层:主要负责为用户提供网络服务。应用层协议包括HTTP(get、post)、FTP(文件传输)、SMTP等
- 2.传输层:主要负责在网络中建立端到端的连接，提供可靠的数据传输。传输层协议包括TCP和UDP
- 3.网络层:主要负责网络地址的分配和路由选择，例如 IP 协议。
- 4.数据链路层:主要负责传输数据帧，例如以太网、ATM 和 PPP 等协议:

<img src="D:\在图片\java网络编程\04.png" style="zoom: 67%;" />



**UDP(User Datagram Protocol):用户数据报协议;	TCP(Transmission Control Protocol):传输控制协议。**

# UDP通信程序

**特点:面向数据包、无连接、不可靠通信。** 

- 不事先建立连接，数据按照包发，一包数据包含:自己的IP、程序端口，目的地IP、程序端口和数据(限制在64KB内)等
- 发送方不管对方是否在线，数据在中间丢失也不管，如果接收方收到数据也不返回确认，故是不可靠的。

通信效率高!用于在线游戏、语音通话(丢包最多声音小点，破音一下)，视频直播。这些场景更在意互动效率，不影响连接的高效率使用。

# TCP通信程序

**特点:面向连接、可靠通信。**

TCP的最终目的:要保证在**不可靠的信道上实现可靠**的传输，

二次握手会导致：客户端发送的**数据包**因网络**延迟很久**才到达服务端，服务端会认为是一个**新的连接**请求而建立连接，但客户端可能早已**放弃**，导致资源浪费。

- TCP主要有三个步骤实现可靠传输:**三次握手**建立连接，传输数据进行确认，三次握手就是为了确保服务端和客户端的收发功能都是正常的，**两次握手**只能确认客户端的**发送能力**和服务端的**接收能力**正常，所以三次握手是最可靠的，最终目的就是为了建立一个可靠的链接。
- <img src="D:\在图片\java网络编程\05.png" style="zoom: 33%;" />
- **四次挥手**断开连接。目的:确保双方数据的收发都已经完成!
- <img src="D:\在图片\java网络编程\06.png" style="zoom: 33%;" />
- 可靠连接:确定通信双方，收发消息都是正常无问题的!**(全双工)**
- 他就适用于对与数据可靠性和安全性要求较高的场景:比如支付，网页文件下载和邮箱。



# 综合练习

